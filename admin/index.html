<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Админ-панель - GOTHYXAN</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial;
            background: #0a0a0a;
            color: white;
        }

        .admin-header {
            background: #111;
            padding: 20px;
            border-bottom: 1px solid #333;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .admin-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 30px;
        }

        .admin-sidebar {
            background: #111;
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #333;
            height: fit-content;
        }

        .admin-content {
            background: #111;
            padding: 30px;
            border-radius: 10px;
            border: 1px solid #333;
        }

        .admin-nav a {
            display: block;
            color: #ccc;
            text-decoration: none;
            padding: 12px 15px;
            margin: 5px 0;
            border-radius: 5px;
            transition: all 0.3s;
        }

            .admin-nav a:hover, .admin-nav a.active {
                background: #222;
                color: white;
            }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

            .form-group label {
                display: block;
                margin-bottom: 8px;
                color: #aaa;
                font-size: 14px;
            }

            .form-group input,
            .form-group textarea,
            .form-group select {
                width: 100%;
                padding: 12px;
                background: #222;
                border: 1px solid #333;
                color: white;
                border-radius: 5px;
                font-size: 14px;
            }

            .form-group textarea {
                min-height: 100px;
                resize: vertical;
            }

        .btn {
            background: white;
            color: black;
            border: none;
            padding: 12px 30px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }

            .btn:hover {
                background: #ddd;
            }

        .btn-danger {
            background: #d32f2f;
            color: white;
        }

            .btn-danger:hover {
                background: #b71c1c;
            }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .product-card {
            background: #222;
            border-radius: 10px;
            padding: 20px;
            border: 1px solid #333;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .stat-card {
            background: #222;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid #333;
        }

        .stat-value {
            font-size: 2em;
            font-weight: bold;
            margin: 10px 0;
            color: white;
        }

        .visitors-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

            .visitors-table th,
            .visitors-table td {
                padding: 12px;
                text-align: left;
                border-bottom: 1px solid #333;
            }

            .visitors-table th {
                background: #222;
                color: #aaa;
            }

        .tab-content {
            display: none;
        }

            .tab-content.active {
                display: block;
            }

        .category-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }

        .category-tag {
            background: #333;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
        }

        .image-preview {
            width: 100%;
            height: 200px;
            background: #222;
            border-radius: 5px;
            margin-top: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

            .image-preview img {
                max-width: 100%;
                max-height: 100%;
                object-fit: contain;
            }

        .order-item {
            background: #222;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 15px;
            border: 1px solid #333;
        }

        .order-status {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
            margin-left: 10px;
        }

        .status-new {
            background: #4CAF50;
            color: white;
        }

        .status-processing {
            background: #2196F3;
            color: white;
        }

        .status-shipped {
            background: #FF9800;
            color: white;
        }

        .status-delivered {
            background: #9C27B0;
            color: white;
        }

        .status-cancelled {
            background: #f44336;
            color: white;
        }
    </style>
</head>
<body>
    <div class="admin-header">
        <h1>👑 GOTHYXAN АДМИН-ПАНЕЛЬ</h1>
        <div>
            <a href="../" class="btn" style="margin-right: 10px;">← На сайт</a>
            <button onclick="logout()" class="btn btn-danger">Выйти</button>
        </div>
    </div>

    <div class="admin-container">
        <div class="admin-sidebar">
            <div class="admin-nav">
                <a href="#products" class="active" onclick="showTab('products')">📦 Товары</a>
                <a href="#add-product" onclick="showTab('add-product')">➕ Добавить товар</a>
                <a href="#categories" onclick="showTab('categories')">🏷️ Категории</a>
                <a href="#visitors" onclick="showTab('visitors')">👥 Посетители</a>
                <a href="#orders" onclick="showTab('orders')">📋 Заказы</a>
                <a href="#analytics" onclick="showTab('analytics')">📊 Аналитика</a>
                <a href="#settings" onclick="showTab('settings')">⚙️ Настройки</a>
            </div>

            <div style="margin-top: 30px; padding: 15px; background: #222; border-radius: 5px;">
                <h3 style="margin-bottom: 10px; color: #aaa;">Быстрые действия</h3>
                <button onclick="showTab('add-product')" class="btn" style="width: 100%; margin-bottom: 10px;">
                    Быстро добавить товар
                </button>
                <button onclick="exportData()" class="btn" style="width: 100%;">
                    Экспорт данных
                </button>
            </div>
        </div>

        <div class="admin-content">
            <!-- ТОВАРЫ -->
            <div id="products" class="tab-content active">
                <h2>Все товары</h2>
                <div class="products-grid" id="products-list">
                    <!-- Товары загружаются через JS -->
                </div>
            </div>

            <!-- ДОБАВИТЬ ТОВАР -->
            <div id="add-product" class="tab-content">
                <h2>Добавить новый товар</h2>
                <form id="product-form" class="form-grid">
                    <div class="form-group">
                        <label>Название товара *</label>
                        <input type="text" id="product-name" required>
                    </div>

                    <div class="form-group">
                        <label>Цена (€) *</label>
                        <input type="number" id="product-price" min="0" step="0.01" required>
                    </div>

                    <div class="form-group">
                        <label>Категория *</label>
                        <select id="product-category" required>
                            <option value="">Выберите категорию</option>
                            <option value="women">Женское</option>
                            <option value="men">Мужское</option>
                            <option value="outerwear">Верхняя одежда</option>
                            <option value="omen">OMEN</option>
                            <option value="new">Новая коллекция</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Подкатегория</label>
                        <input type="text" id="product-subcategory" placeholder="Например: джинсы, футболки">
                    </div>

                    <div class="form-group">
                        <label>Описание *</label>
                        <textarea id="product-description" required></textarea>
                    </div>

                    <div class="form-group">
                        <label>Размеры (через запятую)</label>
                        <input type="text" id="product-sizes" placeholder="XS,S,M,L,XL">
                    </div>

                    <div class="form-group">
                        <label>Цвета (через запятую)</label>
                        <input type="text" id="product-colors" placeholder="черный, белый, серый">
                    </div>

                    <div class="form-group">
                        <label>Теги (через запятую)</label>
                        <input type="text" id="product-tags" placeholder="new, popular, limited">
                    </div>

                    <div class="form-group">
                        <label>Ссылка на изображение *</label>
                        <input type="url" id="product-image" required
                               placeholder="https://images.unsplash.com/photo-..."
                               onchange="previewImage(this.value)">
                        <div class="image-preview">
                            <img id="image-preview" src="" alt="Предпросмотр" style="display: none;">
                            <span id="preview-text">Предпросмотр изображения</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Количество на складе</label>
                        <input type="number" id="product-stock" value="10" min="0">
                    </div>

                    <div class="form-group">
                        <label>Дополнительная информация (JSON)</label>
                        <textarea id="product-meta" placeholder='{"material": "хлопок", "country": "Португалия"}'></textarea>
                        <small style="color: #888;">Дополнительные характеристики в формате JSON</small>
                    </div>

                    <div class="form-group">
                        <button type="submit" class="btn" style="width: 100%; padding: 15px;">
                            ✅ СОХРАНИТЬ ТОВАР
                        </button>
                    </div>
                </form>
            </div>

            <!-- КАТЕГОРИИ -->
            <div id="categories" class="tab-content">
                <h2>Управление категориями</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label>Название категории</label>
                        <input type="text" id="category-name" placeholder="Например: Аксессуары">
                    </div>
                    <div class="form-group">
                        <label>Slug (англ. без пробелов)</label>
                        <input type="text" id="category-slug" placeholder="Например: accessories">
                    </div>
                    <div class="form-group">
                        <label>Ссылка на изображение</label>
                        <input type="url" id="category-image" placeholder="https://...">
                    </div>
                    <div class="form-group">
                        <button onclick="addCategory()" class="btn">Добавить категорию</button>
                    </div>
                </div>

                <h3 style="margin-top: 30px;">Все категории</h3>
                <div id="categories-list" class="products-grid">
                    <!-- Категории загружаются через JS -->
                </div>
            </div>

            <!-- ПОСЕТИТЕЛИ -->
            <div id="visitors" class="tab-content">
                <h2>Статистика посетителей</h2>

                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>Уникальных посетителей</h3>
                        <div class="stat-value" id="unique-visitors">0</div>
                    </div>
                    <div class="stat-card">
                        <h3>Просмотров сегодня</h3>
                        <div class="stat-value" id="today-views">0</div>
                    </div>
                    <div class="stat-card">
                        <h3>Всего просмотров</h3>
                        <div class="stat-value" id="total-views">0</div>
                    </div>
                    <div class="stat-card">
                        <h3>Страны</h3>
                        <div class="stat-value" id="countries-count">0</div>
                    </div>
                </div>

                <h3 style="margin-top: 30px;">Последние посетители</h3>
                <table class="visitors-table" id="visitors-table">
                    <thead>
                        <tr>
                            <th>Время</th>
                            <th>IP</th>
                            <th>Страна</th>
                            <th>Город</th>
                            <th>Страница</th>
                            <th>Браузер</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Данные загружаются через JS -->
                    </tbody>
                </table>

                <div style="margin-top: 20px;">
                    <button onclick="clearVisitors()" class="btn btn-danger">Очистить историю</button>
                    <button onclick="exportVisitors()" class="btn">Экспорт в CSV</button>
                </div>
            </div>

            <!-- ЗАКАЗЫ -->
            <div id="orders" class="tab-content">
                <h2>Заказы</h2>
                <div id="orders-list">
                    <!-- Заказы загружаются через JS -->
                </div>
            </div>

            <!-- АНАЛИТИКА -->
            <div id="analytics" class="tab-content">
                <h2>Аналитика магазина</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>Всего товаров</h3>
                        <div class="stat-value" id="analytics-products">0</div>
                    </div>
                    <div class="stat-card">
                        <h3>Заказов</h3>
                        <div class="stat-value" id="analytics-orders">0</div>
                    </div>
                    <div class="stat-card">
                        <h3>Выручка</h3>
                        <div class="stat-value" id="analytics-revenue">0 €</div>
                    </div>
                    <div class="stat-card">
                        <h3>Конверсия</h3>
                        <div class="stat-value" id="analytics-conversion">0%</div>
                    </div>
                </div>

                <h3 style="margin-top: 30px;">Популярные товары</h3>
                <div id="popular-products" class="products-grid">
                    <!-- Данные загружаются через JS -->
                </div>
            </div>

            <!-- НАСТРОЙКИ -->
            <div id="settings" class="tab-content">
                <h2>Настройки магазина</h2>
                <form id="settings-form" class="form-grid">
                    <div class="form-group">
                        <label>Название магазина</label>
                        <input type="text" id="store-name" value="GOTHYXAN STORE">
                    </div>

                    <div class="form-group">
                        <label>Email для заказов</label>
                        <input type="email" id="store-email" value="orders@gothyxan.com">
                    </div>

                    <div class="form-group">
                        <label>Телефон поддержки</label>
                        <input type="tel" id="store-phone" value="+7 (999) 123-45-67">
                    </div>

                    <div class="form-group">
                        <label>Пароль админки</label>
                        <input type="password" id="admin-password" value="admin123">
                        <small style="color: #888;">Измените пароль для входа</small>
                    </div>

                    <div class="form-group">
                        <label>API ключ для IP трекинга (ipapi.co)</label>
                        <input type="text" id="ipapi-key" placeholder="Получите на ipapi.co">
                        <small style="color: #888;">Бесплатно: 1000 запросов/месяц</small>
                    </div>

                    <div class="form-group">
                        <label>Валюта</label>
                        <select id="store-currency">
                            <option value="€">Евро (€)</option>
                            <option value="$">Доллар ($)</option>
                            <option value="₽">Рубль (₽)</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Язык по умолчанию</label>
                        <select id="default-language">
                            <option value="ru">Русский</option>
                            <option value="en">Английский</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <button type="submit" class="btn">Сохранить настройки</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="admin.js"></script>
</body>
</html>
<!-- Кнопка перевода -->
<button id="lang-switcher" style="
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: white;
    color: black;
    border: none;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    cursor: pointer;
    font-weight: bold;
    z-index: 1000;
    box-shadow: 0 2px 10px rgba(0,0,0,0.3);
">
    EN
</button>

<script>
// Простой переключатель языка
const langSwitcher = document.getElementById('lang-switcher');
let currentLang = localStorage.getItem('site_language') || 'ru';

langSwitcher.textContent = currentLang === 'ru' ? 'EN' : 'RU';

langSwitcher.onclick = function() {
    const newLang = currentLang === 'ru' ? 'en' : 'ru';
    localStorage.setItem('site_language', newLang);
    location.reload();
};
</script>